<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cyberpunk2077Review-Gamiflix</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
   <link rel="stylesheet" href="/css/reviewstyle.css">
    
    <body>
        <div class="title">Cyberpunk 2077</div>
        <div class="section"></div>
        <!-- Description Section -->
        <div class="description-section">
            <h2 class="section-title">Description</h2>
            <p>Cyberpunk 2077 is an open-world, action-adventure RPG set in the sprawling megalopolis of Night City. You play as V, a mercenary outlaw in search of a one-of-a-kind implant that holds the key to immortality. You can customize your character's cyberware, skillset, and playstyle, and explore a vast city where your choices shape the story and the world around you.</p>
        </div>
    
        <!-- Container for Video and Game Details -->
        <div class="container">
            <!-- Video -->
            <iframe width="560" height="315" src="https://www.youtube.com/embed/qIcTM8WXFjk" allowfullscreen></iframe>
    
            <!-- Game Details -->
            <div class="game-details-container">
                <div class="game-details">
                    <div class="image">
                        <img src="/img/cyberpunkreview.jpg">
                    </div>
                    <div class="details">
                        <h1>Cyberpunk 2077</h1>
                        <div class="info">
                            <div>
                                <h3>Genres</h3>
                                <p>Shooter, Role-playing (RPG), Action</p>
                            </div>
                            <div>
                                <h3>Developers</h3>
                                <p>CD Projekt RED</p>
                            </div>
                            <div>
                                <h3>Release Date</h3>
                                <p>December 8, 2020</p>
                            </div>
                            <div>
                                <h3>Content Rating</h3>
                                <p>M Blood and Gore, Intense Violence, Nudity, Strong Language</p>
                            </div>
                            <div>
                                <h3>Platform</h3>
                                <p>PC, PlayStation 5, Xbox Series X/S</p>
                            </div>
                        </div>
                        <div class="platforms">
                            <i class="fab fa-steam"></i>
                            <i class="fab fa-playstation"></i>
                            <i class="fab fa-xbox"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        </div>
    </body>
    
    </html>
    <div class="section">
        <h2 class="section-title">Gamiflix Review</h2>
        <div class="review-container">
            
            <table class="review-table">
                <thead>
                    <tr>
                        <th>Review</th>
                        <th>Liked</th>
                        <th>Disliked</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>
                            Cyberpunk 2077 is one of the most disturbing and mind-blowing RPGs in history, where every decision has a deep impact on our trail. CD Projekt RED tosses us to the center of a city filled with disgusting delights where every character deserves our attention in an immersive experience and overall, very rewarding. From the sarcastic and shadowy tone imposed by the countless scenes in the game, to the flexibility we have on the choices to face every situation that is presented, Night City is truly memorable. It is without a question, in the presence of one of the best games in 2020.
                        </td>
                        <td>
                            - Concise, compelling extrapolation of the base game’s themes into a smaller-scale open world<br>
                            - Immersive experience<br>
                            - Engaging story<br>
                            - Detailed open world
                        </td>
                        <td>
                            - Inherently disruptive to the story, the ending is compelling but hijacks the original narrative<br>
                            - Bugs and glitches<br>
                            - Performance issues at launch<br>
                            - Some AI limitations
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        
    </div>
        <div class="section">
            <div class="score-section">
                <div class="details">
                    <div class="label">Gamiflix Score</div>
                    <div class="description">Generally Favorable</div>
                    <div class="reviews">Based on 50 Critic Reviews</div>
                </div>
                <div class="score gamiflix-green">84</div>
            </div>
            <div class="progress-bar-green"></div>
        </div>
        <div class="section">
            <div class="score-section">
                <div class="details">
                    <div class="label">Graphics Score</div>
                    <div class="description">Exceptional</div>
                    <div class="reviews">Based on 35 Critic Ratings</div>
                </div>
                <div class="score graphics-green">94</div>
            </div>
            <div class="progress-bar-green"></div>
        </div>
        <div class="section">
            <div class="score-section">
                <div class="details">
                    <div class="label">Gameplay Score</div>
                    <div class="description">Exceptional</div>
                    <div class="reviews">Based on 45 Critic Ratings</div>
                </div>
                <div class="score gameplay-green">90</div>
            </div>
            <div class="progress-bar-green"></div>
        </div>
        <div class="section">
            <div class="score-section">
                <div class="details">
                    <div class="label">Smoothness Score</div>
                    <div class="description">Generally Favorable</div>
                    <div class="reviews">Based on 30 Critic Ratings</div>
                </div>
                <div class="score smoothness-green">74</div>
            </div>
            <div class="progress-bar-green"></div>
        </div>
        <div class="section my-score">
            <div class="rating">
                <div class="details">
                    <div class="label">My Score</div>
                    <div class="description">Give your rating of the game</div>
                </div>
                <div class="bars">
                    <div class="bar" data-value="10"></div>
                    <div class="bar" data-value="20"></div>
                    <div class="bar" data-value="30"></div>
                    <div class="bar" data-value="40"></div>
                    <div class="bar" data-value="50"></div>
                    <div class="bar" data-value="60"></div>
                    <div class="bar" data-value="70"></div>
                    <div class="bar" data-value="80"></div>
                    <div class="bar" data-value="90"></div>
                    <div class="bar" data-value="100"></div>
                    <div class="average-pointer" id="average-pointer"></div>
                </div>
                <div class="circle" id="my-score-circle">0</div>
            </div>
        </div>
 <!-- Review Form -->
 <div class="section">
    <button id="add-review-button">Add My Review</button>
    <div id="review-form" style="display: none;">
        <input type="text" id="reviewerName" placeholder="Your Name" required>
        <textarea id="reviewText" placeholder="Write Your Review Here....." required></textarea>
        <button id="submit-review">Submit Review</button>
    </div>
    <h2 class="section-title">User Reviews</h2>
    <div id="reviewsDisplay"></div>
</div>

<script>
  // Unique key for this game
  const gameKey = "gamiflix_rating_cyberpunk";

  // DOM elements
  const pointer = document.getElementById('average-pointer');
  const circle = document.getElementById('my-score-circle');

  // Update UI
  function updateDisplay(average) {
    const clamped = Math.min(Math.max(average, 0), 100); // clamp 0–100
    circle.textContent = clamped.toFixed(1);
    pointer.style.left = `calc(${clamped}% - 1.5px)`;

    // Color based on score
    if (clamped < 40) {
      circle.style.backgroundColor = '#ff6666'; // red
    } else if (clamped < 70) {
      circle.style.backgroundColor = '#ffcc66'; // yellow
    } else {
      circle.style.backgroundColor = '#66cc66'; // green
    }
  }

  // Handle click
  function handleScoreClick(score) {
    let data = JSON.parse(localStorage.getItem(gameKey)) || { total: 0, count: 0 };

    data.total += score;
    data.count += 1;

    const avg = data.total / data.count;
    localStorage.setItem(gameKey, JSON.stringify(data));

    updateDisplay(avg);
  }

  // Setup on DOM ready
  window.addEventListener('DOMContentLoaded', () => {
    // Load previous score
    const stored = localStorage.getItem(gameKey);
    if (stored) {
      try {
        const parsed = JSON.parse(stored);
        if (parsed.total && parsed.count) {
          const avg = parsed.total / parsed.count;
          updateDisplay(avg);
        }
      } catch (e) {
        console.warn('Invalid localStorage format.');
      }
    }

    // Setup click & hover events
    const bars = document.querySelectorAll('.bar');
    bars.forEach(bar => {
      const value = parseInt(bar.getAttribute('data-value'));

      // Hover preview
      bar.addEventListener('mouseover', () => {
        circle.textContent = value;
      });

      // Click = rating
      bar.addEventListener('click', () => {
        handleScoreClick(value);
      });
    });
  });
</script>


<!-- Firebase -->
<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.13.2/firebase-app.js";
  import { getFirestore, collection, addDoc, getDocs, query, orderBy, serverTimestamp } from "https://www.gstatic.com/firebasejs/10.13.2/firebase-firestore.js";

  const firebaseConfig = {
    apiKey: "AIzaSyDHB8DiehcOo2a_j-zTKDrJX05KgsZ7x3U",
    authDomain: "review-737a0.firebaseapp.com",
    projectId: "review-737a0",
    storageBucket: "review-737a0.appspot.com",
    messagingSenderId: "1031987216501",
    appId: "1:1031987216501:web:a8da9806108fb9b2fb783c",
    measurementId: "G-ZR455TKWY6"
  };

  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);

  async function displayReviews() {
    const reviewsDisplay = document.getElementById('reviewsDisplay');
    reviewsDisplay.innerHTML = '';
    const reviewsQuery = query(collection(db, 'reviews'), orderBy('timestamp', 'desc'));
    const querySnapshot = await getDocs(reviewsQuery);
    querySnapshot.forEach((doc) => {
      const r = doc.data();
      const div = document.createElement('div');
      div.classList.add('review-item');
      div.innerHTML = `<strong>${r.name}</strong><p>${r.review}</p><small>${new Date(r.timestamp?.toDate()).toLocaleString()}</small>`;
      reviewsDisplay.appendChild(div);
    });
  }

  document.getElementById('add-review-button').addEventListener('click', (e) => {
    e.preventDefault();
    const form = document.getElementById('review-form');
    form.style.display = (form.style.display === 'block') ? 'none' : 'block';
  });

  document.getElementById('submit-review').addEventListener('click', async () => {
    const name = document.getElementById('reviewerName').value;
    const review = document.getElementById('reviewText').value;
    if (name && review) {
      try {
        await addDoc(collection(db, 'reviews'), {
          name,
          review,
          timestamp: serverTimestamp()
        });
        document.getElementById('reviewerName').value = '';
        document.getElementById('reviewText').value = '';
        displayReviews();
        alert('Thank you for your review!');
      } catch (err) {
        console.error('Error:', err);
      }
    } else {
      alert('Please fill in all fields.');
    }
  });

  window.onload = displayReviews;
</script>
</body>
</html>
