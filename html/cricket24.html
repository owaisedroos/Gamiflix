<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cricket24 Review-Gamiflix</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
    <link rel="stylesheet" href="/css/reviewstyle.css">
</head>
<body>
    <div class="title">Cricket 24</div>
    <div class="section"></div>
    
    <!-- Description Section -->
    <div class="description-section">
        <h2 class="section-title">Description</h2>
        <p>Cricket 24 brings the excitement of international cricket to your screens with licensed teams, stadiums, and game modes. Play as your favorite cricket stars and lead your team to glory across various formats. While the game captures the essence of the sport, it falls short in delivering a fully polished experience.</p>
    </div>
    
    <!-- Container for Video and Game Details -->
    <div class="container">
        <!-- Video -->
        <iframe width="560" height="315" src="https://www.youtube.com/embed/ZobU-Ka6K00" allowfullscreen></iframe>

        <!-- Game Details -->
        <div class="game-details-container">
            <div class="game-details">
                <div class="image">
                    <img src="/img/cricket24.jpg">
                </div>
                <div class="details">
                    <h1>Cricket 24</h1>
                    <div class="info">
                        <div>
                            <h3>Genres</h3>
                            <p>Sports, Simulation</p>
                        </div>
                        <div>
                            <h3>Developers</h3>
                            <p>Big Ant Studios</p>
                        </div>
                        <div>
                            <h3>Release Date</h3>
                            <p>October 5, 2023</p>
                        </div>
                        <div>
                            <h3>Content Rating</h3>
                            <p>E for Everyone</p>
                        </div>
                        <div>
                            <h3>Platform</h3>
                            <p>PC, PlayStation 5, Xbox Series X/S</p>
                        </div>
                    </div>
                    <div class="platforms">
                        <i class="fab fa-steam"></i>
                        <i class="fab fa-playstation"></i>
                        <i class="fab fa-xbox"></i>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Review Section -->
    <div class="section">
        <h2 class="section-title">Gamiflix Review</h2>
        <div class="review-container">
            <table class="review-table">
                <thead>
                    <tr>
                        <th>Review</th>
                        <th>Liked</th>
                        <th>Disliked</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>
                            Cricket 24 offers a decent simulation of the sport but lacks the polish and depth that would keep fans engaged. While the licensed teams and stadiums are a plus, the repetitive gameplay, weak AI, and frequent bugs hold the game back from being a truly enjoyable experience.  Unfortunately, the game does little to evolve from its predecessors, leaving fans disappointed. As of right now Cricket 24 is a disappointingly modest and often slipshod update that seemingly lacks the confidence or creativity to advance further down the wicket.
                        </td>
                        <td>
                            - Licensed teams and stadiums<br>
                            - Realistic cricket atmosphere<br>
                            - Solid commentary
                        </td>
                        <td>
                            - Repetitive gameplay<br>
                            - Weak AI performance<br>
                            - Bugs and glitches<br>
                            - Lack of innovation from previous titles
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

    <!-- Score Section -->
    <div class="section">
        <div class="score-section">
            <div class="details">
                <div class="label">Gamiflix Score</div>
                <div class="description">Mixed Reviews</div>
                <div class="reviews">Based on 40 Critic Reviews</div>
            </div>
            <div class="score gamiflix-yellow">47</div>
        </div>
        <div class="progress-bar-yellow"></div>
    </div>

    <div class="section">
        <div class="score-section">
            <div class="details">
                <div class="label">Graphics Score</div>
                <div class="description">Average</div>
                <div class="reviews">Based on 35 Critic Ratings</div>
            </div>
            <div class="score graphics-yellow">60</div>
        </div>
        <div class="progress-bar-yellow"></div>
    </div>

    <div class="section">
        <div class="score-section">
            <div class="details">
                <div class="label">Gameplay Score</div>
                <div class="description">Below Average</div>
                <div class="reviews">Based on 30 Critic Ratings</div>
            </div>
            <div class="score gameplay-yellow">45</div>
        </div>
        <div class="progress-bar-yellow"></div>
    </div>

    <div class="section">
        <div class="score-section">
            <div class="details">
                <div class="label">Smoothness Score</div>
                <div class="description">Generally Unfavorable</div>
                <div class="reviews">Based on 20 Critic Ratings</div>
            </div>
            <div class="score smoothness-red">38</div>
        </div>
        <div class="progress-bar-red"></div>
    </div>

    <!-- User Review Section -->
    <div class="section my-score">
        <div class="rating">
            <div class="details">
                <div class="label">My Score</div>
                <div class="description">Give your rating of the game</div>
            </div>
            <div class="bars">
                <div class="bar" data-value="10"></div>
                <div class="bar" data-value="20"></div>
                <div class="bar" data-value="30"></div>
                <div class="bar" data-value="40"></div>
                <div class="bar" data-value="50"></div>
                <div class="bar" data-value="60"></div>
                <div class="bar" data-value="70"></div>
                <div class="bar" data-value="80"></div>
                <div class="bar" data-value="90"></div>
                <div class="bar" data-value="100"></div>
                <div class="average-pointer" id="average-pointer"></div>
            </div>
            <div class="circle" id="my-score-circle">0</div>
        </div>
    </div>

    <div class="section">
        <button id="add-review-button">Add My Review</button>
        <div id="review-form" style="display: none;">
            <input type="text" id="reviewerName" placeholder="Your Name" required>
            <textarea id="reviewText" placeholder="Write Your Review Here....." required></textarea>
            <button id="submit-review">Submit Review</button>
        </div>
        <h2 class="section-title">User Reviews</h2>
        <div id="reviewsDisplay"></div>
    </div>

    <script>
    let ratings = [];
    let totalRating = 0;

    document.querySelectorAll('.bar').forEach(bar => {
        bar.addEventListener('mouseover', function() {
            const value = this.getAttribute('data-value');
            document.getElementById('my-score-circle').textContent = value;
        });

        bar.addEventListener('click', function() {
            const value = parseInt(this.getAttribute('data-value'));
            ratings.push(value);
            totalRating += value;
            const averageRating = totalRating / ratings.length;
            document.getElementById('my-score-circle').textContent = averageRating.toFixed(1);
            updateAverageScoreColor(averageRating);
            updateAveragePointer(averageRating);
        });
    });

    function updateAverageScoreColor(average) {
        const circle = document.getElementById('my-score-circle');
        if (average < 40) {
            circle.style.backgroundColor = '#ff6666'; // Red for low ratings
        } else if (average < 70) {
            circle.style.backgroundColor = '#ffcc66'; // Yellow for mid ratings
        } else {
            circle.style.backgroundColor = '#66cc66'; // Green for high ratings
        }
    }

    function updateAveragePointer(average) {
        const pointer = document.getElementById('average-pointer');
        const bars = document.querySelectorAll('.bar');
        const barWidth = document.querySelector('.bar').offsetWidth;
        const barCount = bars.length;

        // Calculate the position of the pointer
        pointer.style.left = `${(average / 100) * barWidth * barCount}px`;
    } 
</script>
 <!-- Firebase SDK -->
 <script type="module">
    // Import the functions you need from the SDKs you need
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.13.2/firebase-app.js";
    import { getFirestore, collection, addDoc, getDocs, query, orderBy, serverTimestamp } from "https://www.gstatic.com/firebasejs/10.13.2/firebase-firestore.js";

    // Your web app's Firebase configuration
    const firebaseConfig = {
        apiKey: "AIzaSyAwtlPx5r6iQfYjsIZEPqY8k3Sg9BtCOSg",
  authDomain: "commonreview-3ae13.firebaseapp.com",
  projectId: "commonreview-3ae13",
  storageBucket: "commonreview-3ae13.appspot.com",
  messagingSenderId: "487268947794",
  appId: "1:487268947794:web:3f2cd479ce9b5c8d9e4c8b",
  measurementId: "G-NQJC4GJ1M4"
    };

    // Initialize Firebase and Firestore
    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    // Function to display reviews from Firestore
    async function displayReviews() {
        const reviewsDisplay = document.getElementById('reviewsDisplay');
        reviewsDisplay.innerHTML = ''; // Clear current reviews

        // Get reviews from Firestore and display them
        const reviewsQuery = query(collection(db, 'reviews'), orderBy('timestamp', 'desc'));
        const querySnapshot = await getDocs(reviewsQuery);
        
        querySnapshot.forEach((doc) => {
            const reviewData = doc.data();
            const reviewElement = document.createElement('div');
            reviewElement.classList.add('review-item');
            reviewElement.innerHTML = `
                <strong>${reviewData.name}</strong>
                <p>${reviewData.review}</p>
                <small>${new Date(reviewData.timestamp?.toDate()).toLocaleString()}</small>
            `;
            reviewsDisplay.appendChild(reviewElement);
        });
    }

    // Show/hide the review form when "Add My Review" is clicked
    document.getElementById('add-review-button').addEventListener('click', function(event) {
        event.preventDefault(); 
        const form = document.getElementById('review-form');

        if (form.style.display === 'none' || form.style.display === '') {
            form.style.display = 'block';
        } else {
            form.style.display = 'none';
        }
    });

    // Handle form submission to Firestore
    document.getElementById('submit-review').addEventListener('click', async function() {
        const name = document.getElementById('reviewerName').value;
        const review = document.getElementById('reviewText').value;

        if (name && review) {
            // Add review to Firebase Firestore
            try {
                await addDoc(collection(db, 'reviews'), {
                    name: name,
                    review: review,
                    timestamp: serverTimestamp()
                });
                console.log('Review added');
                document.getElementById('reviewerName').value = '';
                document.getElementById('reviewText').value = '';
                displayReviews(); // Refresh the reviews
                alert('Thank you for your review!');
            } catch (error) {
                console.error('Error adding review: ', error);
            }
        } else {
            alert('Please fill out both fields.');
        }
    });

    // Display reviews when the page loads
    window.onload = displayReviews;
</script>
</body>
</html>
