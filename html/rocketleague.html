<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RocketLeague Review-Gamiflix</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
    <link rel="stylesheet" href="/css/reviewstyle.css">
</head>
<body>
    <div class="title">Rocket League</div>
    <div class="section"></div>

    <!-- Description Section -->
    <div class="description-section">
        <h2 class="section-title">Description</h2>
        <p>Rocket League is a high-powered hybrid of arcade-style soccer and vehicular mayhem, featuring easy-to-understand controls and fluid, physics-driven competition. Rocket League includes casual and competitive Online Matches, a fully-featured offline Season Mode, special “Mutators” that let you change the rules entirely, hockey and basketball-inspired Extra Modes, and more than 500 trillion possible cosmetic customization combinations. The game is renowned for its skill-based gameplay, addictive multiplayer modes, and exciting blend of sports and fast-paced vehicle action.</p>
    </div>

    <!-- Container for Video and Game Details -->
    <div class="container">
        <!-- Video -->
        <iframe width="560" height="315" src="https://www.youtube.com/embed/HX1u73kJVyE" allowfullscreen></iframe>

        <!-- Game Details -->
        <div class="game-details-container">
            <div class="game-details">
                <div class="image">
                    <img src="/img/rocketleague.jpg">
                </div>
                <div class="details">
                    <h1>Rocket League</h1>
                    <div class="info">
                        <div>
                            <h3>Genres</h3>
                            <p>Sports, Action, Multiplayer</p>
                        </div>
                        <div>
                            <h3>Developers</h3>
                            <p>Psyonix</p>
                        </div>
                        <div>
                            <h3>Release Date</h3>
                            <p>July 7, 2015</p>
                        </div>
                        <div>
                            <h3>Content Rating</h3>
                            <p>E for Everyone</p>
                        </div>
                        <div>
                            <h3>Platform</h3>
                            <p>PC, PlayStation 4, Xbox One, Nintendo Switch</p>
                        </div>
                    </div>
                    <div class="platforms">
                        <i class="fab fa-steam"></i>
                        <i class="fab fa-playstation"></i>
                        <i class="fab fa-xbox"></i>
                        <i class="fab fa-nintendo-switch"></i>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Review Section -->
    <div class="section">
        <h2 class="section-title">Gamiflix Review</h2>
        <div class="review-container">
            <table class="review-table">
                <thead>
                    <tr>
                        <th>Review</th>
                        <th>Liked</th>
                        <th>Disliked</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>
                            Rocket League is an addictively fun mix of soccer and rocket-powered cars. With its fast-paced action, vibrant graphics, and thrilling multiplayer modes, Rocket League offers hours of intense competition. A formula so simple, yet so challenging and exhilarating, that it's impossible not to get hooked. The learning curve is accessible, yet the skill ceiling is high, making it rewarding for both casual and competitive players. The depth is there to keep players coming back for years to come, and Psyonix has done a masterful job in creating one of the best multiplayer experiences yet. Despite its brilliance, occasional server issues and matchmaking imbalances can cause frustration at times.
                        </td>
                        <td>
                            - Addictive and skill-based gameplay<br>
                            - Thrilling multiplayer experience<br>
                            - Fun mix of sports and action<br>
                            - High replay value
                        </td>
                        <td>
                            - Occasional server issues<br>
                            - Matchmaking imbalances<br>
                            - Lacks depth in single-player content
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

    <!-- Score Section -->
    <div class="section">
        <div class="score-section">
            <div class="details">
                <div class="label">Gamiflix Score</div>
                <div class="description">Generally Favorable</div>
                <div class="reviews">Based on 60 Critic Reviews</div>
            </div>
            <div class="score gamiflix-green">86</div>
        </div>
        <div class="progress-bar-green"></div>
    </div>

    <div class="section">
        <div class="score-section">
            <div class="details">
                <div class="label">Graphics Score</div>
                <div class="description">Visually Appealing</div>
                <div class="reviews">Based on 50 Critic Ratings</div>
            </div>
            <div class="score graphics-green">88</div>
        </div>
        <div class="progress-bar-green"></div>
    </div>

    <div class="section">
        <div class="score-section">
            <div class="details">
                <div class="label">Gameplay Score</div>
                <div class="description">Exceptional</div>
                <div class="reviews">Based on 55 Critic Ratings</div>
            </div>
            <div class="score gameplay-green">90</div>
        </div>
        <div class="progress-bar-green"></div>
    </div>

    <div class="section">
        <div class="score-section">
            <div class="details">
                <div class="label">Smoothness Score</div>
                <div class="description">Generally Favorable</div>
                <div class="reviews">Based on 45 Critic Ratings</div>
            </div>
            <div class="score smoothness-green">81</div>
        </div>
        <div class="progress-bar-green"></div>
    </div>

    <!-- User Review Section -->
    <div class="section my-score">
        <div class="rating">
            <div class="details">
                <div class="label">My Score</div>
                <div class="description">Give your rating of the game</div>
            </div>
            <div class="bars">
                <div class="bar" data-value="10"></div>
                <div class="bar" data-value="20"></div>
                <div class="bar" data-value="30"></div>
                <div class="bar" data-value="40"></div>
                <div class="bar" data-value="50"></div>
                <div class="bar" data-value="60"></div>
                <div class="bar" data-value="70"></div>
                <div class="bar" data-value="80"></div>
                <div class="bar" data-value="90"></div>
                <div class="bar" data-value="100"></div>
                <div class="average-pointer" id="average-pointer"></div>
            </div>
            <div class="circle" id="my-score-circle">0</div>
        </div>
    </div>

    <div class="section">
        <button id="add-review-button">Add My Review</button>
        <div id="review-form" style="display: none;">
            <input type="text" id="reviewerName" placeholder="Your Name" required>
            <textarea id="reviewText" placeholder="Write Your Review Here....." required></textarea>
            <button id="submit-review">Submit Review</button>
        </div>
        <h2 class="section-title">User Reviews</h2>
        <div id="reviewsDisplay"></div>
    </div>

    <script>
        let ratings = [];
        let totalRating = 0;
    
        document.querySelectorAll('.bar').forEach(bar => {
            bar.addEventListener('mouseover', function() {
                const value = this.getAttribute('data-value');
                document.getElementById('my-score-circle').textContent = value;
            });
    
            bar.addEventListener('click', function() {
                const value = parseInt(this.getAttribute('data-value'));
                ratings.push(value);
                totalRating += value;
                const averageRating = totalRating / ratings.length;
                document.getElementById('my-score-circle').textContent = averageRating.toFixed(1);
                updateAverageScoreColor(averageRating);
                updateAveragePointer(averageRating);
            });
        });
    
        function updateAverageScoreColor(average) {
            const circle = document.getElementById('my-score-circle');
            if (average < 40) {
                circle.style.backgroundColor = '#ff6666'; // Red for low ratings
            } else if (average < 70) {
                circle.style.backgroundColor = '#ffcc66'; // Yellow for mid ratings
            } else {
                circle.style.backgroundColor = '#66cc66'; // Green for high ratings
            }
        }
    
        function updateAveragePointer(average) {
            const pointer = document.getElementById('average-pointer');
            const bars = document.querySelectorAll('.bar');
            const barWidth = document.querySelector('.bar').offsetWidth;
            const barCount = bars.length;
    
            // Calculate the position of the pointer
            pointer.style.left = `${(average / 100) * barWidth * barCount}px`;
        } 
    </script>
     <!-- Firebase SDK -->
     <script type="module">
        // Import the functions you need from the SDKs you need
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.13.2/firebase-app.js";
        import { getFirestore, collection, addDoc, getDocs, query, orderBy, serverTimestamp } from "https://www.gstatic.com/firebasejs/10.13.2/firebase-firestore.js";
    
        // Your web app's Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyAwtlPx5r6iQfYjsIZEPqY8k3Sg9BtCOSg",
  authDomain: "commonreview-3ae13.firebaseapp.com",
  projectId: "commonreview-3ae13",
  storageBucket: "commonreview-3ae13.appspot.com",
  messagingSenderId: "487268947794",
  appId: "1:487268947794:web:3f2cd479ce9b5c8d9e4c8b",
  measurementId: "G-NQJC4GJ1M4"
        };
    
        // Initialize Firebase and Firestore
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);
    
        // Function to display reviews from Firestore
        async function displayReviews() {
            const reviewsDisplay = document.getElementById('reviewsDisplay');
            reviewsDisplay.innerHTML = ''; // Clear current reviews
    
            // Get reviews from Firestore and display them
            const reviewsQuery = query(collection(db, 'reviews'), orderBy('timestamp', 'desc'));
            const querySnapshot = await getDocs(reviewsQuery);
            
            querySnapshot.forEach((doc) => {
                const reviewData = doc.data();
                const reviewElement = document.createElement('div');
                reviewElement.classList.add('review-item');
                reviewElement.innerHTML = `
                    <strong>${reviewData.name}</strong>
                    <p>${reviewData.review}</p>
                    <small>${new Date(reviewData.timestamp?.toDate()).toLocaleString()}</small>
                `;
                reviewsDisplay.appendChild(reviewElement);
            });
        }
    
        // Show/hide the review form when "Add My Review" is clicked
        document.getElementById('add-review-button').addEventListener('click', function(event) {
            event.preventDefault(); 
            const form = document.getElementById('review-form');
    
            if (form.style.display === 'none' || form.style.display === '') {
                form.style.display = 'block';
            } else {
                form.style.display = 'none';
            }
        });
    
        // Handle form submission to Firestore
        document.getElementById('submit-review').addEventListener('click', async function() {
            const name = document.getElementById('reviewerName').value;
            const review = document.getElementById('reviewText').value;
    
            if (name && review) {
                // Add review to Firebase Firestore
                try {
                    await addDoc(collection(db, 'reviews'), {
                        name: name,
                        review: review,
                        timestamp: serverTimestamp()
                    });
                    console.log('Review added');
                    document.getElementById('reviewerName').value = '';
                    document.getElementById('reviewText').value = '';
                    displayReviews(); // Refresh the reviews
                    alert('Thank you for your review!');
                } catch (error) {
                    console.error('Error adding review: ', error);
                }
            } else {
                alert('Please fill out both fields.');
            }
        });
    
        // Display reviews when the page loads
        window.onload = displayReviews;
    </script>
    </body>
    </html>
